<app-general-nav></app-general-nav>
<section class="main-container">
    <div class="container-fluid login-container">
        <h2 class="login-title text-center mb-4">Welcome Back</h2>
        <form [formGroup]="loginForm" (ngSubmit)="loginFunction(loginForm)" class="login-form">
            <div class="login-form__group" [ngClass]="{'login-form__focused':emailFocused}">
                <label for="email" class="login-form__label">Email</label>
                <input id="email" class="login-form__input login-form__input-mail" (focus)="toggleEmailFocus()"
                    (focusout)="toggleEmailFocus()" type="email" name="email" formControlName="userMail" [ngClass]="{
                    'has-danger': ((loginForm.get('userMail')!.invalid && loginForm.get('userMail')!.dirty)||(loginForm.get('userMail')!.touched && loginForm.get('userMail')!.pristine)), 
                    'has-success': loginForm.get('userMail')!.valid && loginForm.get('userMail')!.dirty
                }" />
            </div>
            <div class="error-msg" *ngIf="loginForm.get('userMail')!.hasError('email') && !secondaryMailFocused">
                <p class="error-msg-p">Enter a valid email address</p>
            </div>
            <div class="error-msg"
                *ngIf="loginForm.get('userMail')!.hasError('required') && loginForm.get('userMail')!.touched && !emailFilled">
                <p class="error-msg-p">Email Required</p>
            </div>
            <div class="login-form__group" [ngClass]="{'login-form__focused':passwordFocused}">
                <label for="password" class="login-form__label">Password</label>
                <input id="password" class="login-form__input" (focus)="togglePasswordFocus()"
                    (focusout)="togglePasswordFocus()" type="password" name="password" formControlName="userPassword"
                    [ngClass]="{
                    'has-danger': ((loginForm.get('userPassword')!.invalid && loginForm.get('userPassword')!.dirty)||(loginForm.get('userPassword')!.touched && loginForm.get('userPassword')!.pristine)), 
                    'has-success': loginForm.get('userPassword')!.valid && loginForm.get('userPassword')!.dirty }" />
            </div>
            <div class="error-msg"
                *ngIf="loginForm.get('userPassword')!.hasError('pattern') && !secondaryPasswordFocused">
                <p class="error-msg-p">Enter a valid password</p>
            </div>
            <div class="error-msg"
                *ngIf="loginForm.get('userPassword')!.hasError('required') && loginForm.get('userPassword')!.touched && !passwordFilled">
                <p class="error-msg-p">Password Required</p>
            </div>
            <div class="forgot-passowrd-form">
                <p class="forgot-password-form__text" (click)="goToForgotPassword()">Forgot Password?</p>
            </div>
            <button [disabled]="!loginForm.valid" id="login-button" type="submit"
                class="login-form__btn ripple">Login</button>
        </form>
    </div>
</section>